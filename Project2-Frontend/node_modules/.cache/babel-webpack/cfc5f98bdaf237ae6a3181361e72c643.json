{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/login.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = \"body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n#welcome[_ngcontent-%COMP%]{\\r\\n    border-style: solid;\\r\\n    border-radius: .5em;\\r\\n}\\r\\n\\r\\n.bg[_ngcontent-%COMP%]{\\r\\n    background-image: url('BarNav1.jpg');\\r\\n    height: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlbGNvbWUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksb0NBQW9EO0lBQ3BELFlBQVk7QUFDaEIiLCJmaWxlIjoid2VsY29tZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSwgaHRtbHtcclxuICAgIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuI3dlbGNvbWV7XHJcbiAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4gICAgYm9yZGVyLXJhZGl1czogLjVlbTtcclxufVxyXG5cclxuLmJne1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi9hc3NldHMvQmFyTmF2MS5qcGcnKTtcclxuICAgIGhlaWdodDogMTAwJTtcclxufVxyXG4iXX0= */\";\nexport class WelcomeComponent {\n  constructor(ls, router) {\n    this.ls = ls;\n    this.router = router;\n    this.userName = '';\n    this.passWord = '';\n    this.email = ''; //add URL variable so that we can add fetch request to backend\n\n    this.urllogin = \"http://localhost:8090/login\";\n  }\n\n  ngOnInit() {}\n\n  loginFunc() {\n    console.log(\"in loginfunc1\");\n    this.ls.login(this.userName, this.passWord).subscribe(data => {\n      this.package = data;\n      console.log(\"in loginFunc, should have Package\");\n      console.log(this.package); //localStorage.setItem('token', this.package.jwt);\n      //localStorage.setItem('user', JSON.stringify(this.package.user));\n\n      let newPackage = JSON.stringify(this.package);\n      localStorage.setItem('pkg', newPackage);\n      console.log(localStorage.getItem('pkg')); //console.log(JSON.stringify(localStorage.getItem('user')));\n      //console.log(localStorage.getItem('token'));\n    }, () => {\n      console.log(\"LOGIN FAILED\");\n      this.package = null;\n    });\n    this.getUserInfo();\n  }\n\n  getUserInfo() {\n    this.ls.getUser(this.userName, this.passWord).subscribe(data => {\n      this.user = data;\n      console.log(this.user);\n    }, () => {\n      this.user = null;\n      console.log(\"NO USER\");\n    });\n  }\n\n  canActivate(route, state) {\n    let currentJwt = this.ls.login(this.userName, this.passWord).subscribe(data => {\n      currentJwt = data;\n    });\n\n    if (currentJwt) {\n      return true;\n    }\n\n    this.router.navigate([\"\"], {\n      queryParams: {\n        returnUrl: state.url\n      }\n    });\n    return false;\n  } //add Registration function\n\n  /*const urlreg = \"http://localhost:8090/register\"\r\n  async function regiFunc() {\r\n    let usern = document.getElementById(\"username\")\r\n    let email = document.getElementById(\"email\")\r\n    let userp = document.getElementById(\"password\")\r\n    let usreg = {\r\n      usern,\r\n      email,\r\n      userp\r\n    }\r\n    console.log(usreg)\r\n    let response = await fetch(urlreg, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(usreg),\r\n      credentials: \"include\"\r\n    })\r\n    console.log(response.status)\r\n  }*/\n\n\n  regFunc() {\n    this.ls.register(this.userName, this.email, this.passWord).subscribe(data => {\n      this.package = data;\n      console.log(this.package);\n    }, () => {\n      this.package = null;\n    });\n  }\n\n}\n\nWelcomeComponent.ɵfac = function WelcomeComponent_Factory(t) {\n  return new (t || WelcomeComponent)(i0.ɵɵdirectiveInject(i1.LoginService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nWelcomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WelcomeComponent,\n  selectors: [[\"app-welcome\"]],\n  decls: 34,\n  vars: 2,\n  consts: [[\"rel\", \"function\", \"href\", \"welcome.component.ts\"], [1, \"bg\"], [1, \"container\", \"w-50\"], [\"id\", \"welcome\", 1, \"p-2\", \"text-center\", \"bg-light\"], [1, \"container\", 2, \"margin-top\", \"5em\", \"margin-bottom\", \"5em\"], [1, \"d-flex\", \"justify-content-center\", \"h-100\"], [1, \"card\"], [1, \"card-header\", \"text-center\"], [1, \"card-body\"], [1, \"input-group\", \"form-group\"], [1, \"input-group-prepend\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-user\"], [\"type\", \"text\", \"placeholder\", \"username\", \"id\", \"FormControlInputUName\", \"name\", \"userName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-key\"], [\"type\", \"password\", \"placeholder\", \"password\", \"id\", \"FormControlInputPass\", \"name\", \"passWord\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-group\", \"text-center\"], [\"type\", \"submit\", \"routerLink\", \"home\", 1, \"btn-dark\", \"login_btn\", 3, \"click\"], [1, \"card-footer\"], [1, \"d-flex\", \"justify-content-center\"], [\"routerLink\", \"/new\", 1, \"btn\", \"link\"]],\n  template: function WelcomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\");\n      i0.ɵɵelementStart(1, \"head\");\n      i0.ɵɵelement(2, \"link\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"body\", 1);\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵelementStart(5, \"h2\", 3);\n      i0.ɵɵtext(6, \"Welcome to the Mixologist's Cookbook! Please Sign In Below\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵelementStart(10, \"div\", 7);\n      i0.ɵɵelementStart(11, \"h3\");\n      i0.ɵɵtext(12, \"Sign In\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelementStart(14, \"form\");\n      i0.ɵɵelementStart(15, \"div\", 9);\n      i0.ɵɵelementStart(16, \"div\", 10);\n      i0.ɵɵelementStart(17, \"span\", 11);\n      i0.ɵɵelement(18, \"i\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"input\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function WelcomeComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.userName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 9);\n      i0.ɵɵelementStart(21, \"div\", 10);\n      i0.ɵɵelementStart(22, \"span\", 11);\n      i0.ɵɵelement(23, \"i\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"input\", 15);\n      i0.ɵɵlistener(\"ngModelChange\", function WelcomeComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.passWord = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 16);\n      i0.ɵɵelementStart(26, \"button\", 17);\n      i0.ɵɵlistener(\"click\", function WelcomeComponent_Template_button_click_26_listener() {\n        return ctx.loginFunc();\n      });\n      i0.ɵɵtext(27, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 18);\n      i0.ɵɵelementStart(29, \"div\", 19);\n      i0.ɵɵelementStart(30, \"h6\");\n      i0.ɵɵtext(31, \"Don't have an account?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"a\", 20);\n      i0.ɵɵtext(33, \"Sign Up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngModel\", ctx.userName);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.passWord);\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.RouterLink, i2.RouterLinkWithHref],\n  styles: [_c0, _c0]\n});","map":{"version":3,"sources":["C:/Users/atkus/Documents/Revature/p2-recipebook/Project2-Frontend/src/app/components/welcome/welcome.component.ts"],"names":["i0","i1","i2","i3","_c0","WelcomeComponent","constructor","ls","router","userName","passWord","email","urllogin","ngOnInit","loginFunc","console","log","login","subscribe","data","package","newPackage","JSON","stringify","localStorage","setItem","getItem","getUserInfo","getUser","user","canActivate","route","state","currentJwt","navigate","queryParams","returnUrl","url","regFunc","register","ɵfac","WelcomeComponent_Factory","t","ɵɵdirectiveInject","LoginService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","WelcomeComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","WelcomeComponent_Template_input_ngModelChange_19_listener","$event","WelcomeComponent_Template_input_ngModelChange_24_listener","WelcomeComponent_Template_button_click_26_listener","ɵɵadvance","ɵɵproperty","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","DefaultValueAccessor","NgControlStatus","NgModel","RouterLink","RouterLinkWithHref","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/login.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"@angular/forms\";\r\nconst _c0 = \"body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n#welcome[_ngcontent-%COMP%]{\\r\\n    border-style: solid;\\r\\n    border-radius: .5em;\\r\\n}\\r\\n\\r\\n.bg[_ngcontent-%COMP%]{\\r\\n    background-image: url('BarNav1.jpg');\\r\\n    height: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlbGNvbWUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksb0NBQW9EO0lBQ3BELFlBQVk7QUFDaEIiLCJmaWxlIjoid2VsY29tZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSwgaHRtbHtcclxuICAgIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuI3dlbGNvbWV7XHJcbiAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4gICAgYm9yZGVyLXJhZGl1czogLjVlbTtcclxufVxyXG5cclxuLmJne1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi9hc3NldHMvQmFyTmF2MS5qcGcnKTtcclxuICAgIGhlaWdodDogMTAwJTtcclxufVxyXG4iXX0= */\";\r\nexport class WelcomeComponent {\r\n    constructor(ls, router) {\r\n        this.ls = ls;\r\n        this.router = router;\r\n        this.userName = '';\r\n        this.passWord = '';\r\n        this.email = '';\r\n        //add URL variable so that we can add fetch request to backend\r\n        this.urllogin = \"http://localhost:8090/login\";\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    loginFunc() {\r\n        console.log(\"in loginfunc1\");\r\n        this.ls.login(this.userName, this.passWord).subscribe((data) => {\r\n            this.package = data;\r\n            console.log(\"in loginFunc, should have Package\");\r\n            console.log(this.package);\r\n            //localStorage.setItem('token', this.package.jwt);\r\n            //localStorage.setItem('user', JSON.stringify(this.package.user));\r\n            let newPackage = JSON.stringify(this.package);\r\n            localStorage.setItem('pkg', newPackage);\r\n            console.log(localStorage.getItem('pkg'));\r\n            //console.log(JSON.stringify(localStorage.getItem('user')));\r\n            //console.log(localStorage.getItem('token'));\r\n        }, () => {\r\n            console.log(\"LOGIN FAILED\");\r\n            this.package = null;\r\n        });\r\n        this.getUserInfo();\r\n    }\r\n    getUserInfo() {\r\n        this.ls.getUser(this.userName, this.passWord).subscribe((data) => {\r\n            this.user = data;\r\n            console.log(this.user);\r\n        }, () => {\r\n            this.user = null;\r\n            console.log(\"NO USER\");\r\n        });\r\n    }\r\n    canActivate(route, state) {\r\n        let currentJwt = this.ls.login(this.userName, this.passWord).subscribe((data) => {\r\n            currentJwt = data;\r\n        });\r\n        if (currentJwt) {\r\n            return true;\r\n        }\r\n        this.router.navigate([\"\"], { queryParams: { returnUrl: state.url } });\r\n        return false;\r\n    }\r\n    //add Registration function\r\n    /*const urlreg = \"http://localhost:8090/register\"\r\n    async function regiFunc() {\r\n      let usern = document.getElementById(\"username\")\r\n      let email = document.getElementById(\"email\")\r\n      let userp = document.getElementById(\"password\")\r\n      let usreg = {\r\n        usern,\r\n        email,\r\n        userp\r\n      }\r\n      console.log(usreg)\r\n      let response = await fetch(urlreg, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(usreg),\r\n        credentials: \"include\"\r\n      })\r\n      console.log(response.status)\r\n    }*/\r\n    regFunc() {\r\n        this.ls.register(this.userName, this.email, this.passWord).subscribe((data) => {\r\n            this.package = data;\r\n            console.log(this.package);\r\n        }, () => {\r\n            this.package = null;\r\n        });\r\n    }\r\n}\r\nWelcomeComponent.ɵfac = function WelcomeComponent_Factory(t) { return new (t || WelcomeComponent)(i0.ɵɵdirectiveInject(i1.LoginService), i0.ɵɵdirectiveInject(i2.Router)); };\r\nWelcomeComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: WelcomeComponent, selectors: [[\"app-welcome\"]], decls: 34, vars: 2, consts: [[\"rel\", \"function\", \"href\", \"welcome.component.ts\"], [1, \"bg\"], [1, \"container\", \"w-50\"], [\"id\", \"welcome\", 1, \"p-2\", \"text-center\", \"bg-light\"], [1, \"container\", 2, \"margin-top\", \"5em\", \"margin-bottom\", \"5em\"], [1, \"d-flex\", \"justify-content-center\", \"h-100\"], [1, \"card\"], [1, \"card-header\", \"text-center\"], [1, \"card-body\"], [1, \"input-group\", \"form-group\"], [1, \"input-group-prepend\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-user\"], [\"type\", \"text\", \"placeholder\", \"username\", \"id\", \"FormControlInputUName\", \"name\", \"userName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-key\"], [\"type\", \"password\", \"placeholder\", \"password\", \"id\", \"FormControlInputPass\", \"name\", \"passWord\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-group\", \"text-center\"], [\"type\", \"submit\", \"routerLink\", \"home\", 1, \"btn-dark\", \"login_btn\", 3, \"click\"], [1, \"card-footer\"], [1, \"d-flex\", \"justify-content-center\"], [\"routerLink\", \"/new\", 1, \"btn\", \"link\"]], template: function WelcomeComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"html\");\r\n        i0.ɵɵelementStart(1, \"head\");\r\n        i0.ɵɵelement(2, \"link\", 0);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"body\", 1);\r\n        i0.ɵɵelementStart(4, \"div\", 2);\r\n        i0.ɵɵelementStart(5, \"h2\", 3);\r\n        i0.ɵɵtext(6, \"Welcome to the Mixologist's Cookbook! Please Sign In Below\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"div\", 4);\r\n        i0.ɵɵelementStart(8, \"div\", 5);\r\n        i0.ɵɵelementStart(9, \"div\", 6);\r\n        i0.ɵɵelementStart(10, \"div\", 7);\r\n        i0.ɵɵelementStart(11, \"h3\");\r\n        i0.ɵɵtext(12, \"Sign In\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"div\", 8);\r\n        i0.ɵɵelementStart(14, \"form\");\r\n        i0.ɵɵelementStart(15, \"div\", 9);\r\n        i0.ɵɵelementStart(16, \"div\", 10);\r\n        i0.ɵɵelementStart(17, \"span\", 11);\r\n        i0.ɵɵelement(18, \"i\", 12);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"input\", 13);\r\n        i0.ɵɵlistener(\"ngModelChange\", function WelcomeComponent_Template_input_ngModelChange_19_listener($event) { return ctx.userName = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(20, \"div\", 9);\r\n        i0.ɵɵelementStart(21, \"div\", 10);\r\n        i0.ɵɵelementStart(22, \"span\", 11);\r\n        i0.ɵɵelement(23, \"i\", 14);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(24, \"input\", 15);\r\n        i0.ɵɵlistener(\"ngModelChange\", function WelcomeComponent_Template_input_ngModelChange_24_listener($event) { return ctx.passWord = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(25, \"div\", 16);\r\n        i0.ɵɵelementStart(26, \"button\", 17);\r\n        i0.ɵɵlistener(\"click\", function WelcomeComponent_Template_button_click_26_listener() { return ctx.loginFunc(); });\r\n        i0.ɵɵtext(27, \"Login\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(28, \"div\", 18);\r\n        i0.ɵɵelementStart(29, \"div\", 19);\r\n        i0.ɵɵelementStart(30, \"h6\");\r\n        i0.ɵɵtext(31, \"Don't have an account?\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(32, \"a\", 20);\r\n        i0.ɵɵtext(33, \"Sign Up\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(19);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.userName);\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.passWord);\r\n    } }, directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.RouterLink, i2.RouterLinkWithHref], styles: [_c0, _c0] });\r\n"]},"metadata":{},"sourceType":"module"}